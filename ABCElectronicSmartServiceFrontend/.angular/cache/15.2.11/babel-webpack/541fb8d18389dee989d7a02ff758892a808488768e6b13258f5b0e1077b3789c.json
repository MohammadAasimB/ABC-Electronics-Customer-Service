{"ast":null,"code":"import { HttpParams } from '@angular/common/http';\nimport { tap } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"./login.service\";\nexport class ApiService {\n  // loginService: any;\n  constructor(http, loginService) {\n    this.http = http;\n    this.loginService = loginService;\n    this.baseUrl = 'http://localhost:8080/logIn';\n    this.bookComplaintUrl = 'http://localhost:8080/api/complaints';\n  }\n  // logIn(name: string, password: string, role: string): Observable<string> {\n  //   const url = `${this.baseUrl}/${name}/${password}/${role}`;\n  //   return this.http.get<string>(url);\n  // }\n  getClientById(id) {\n    return this.http.get('http://localhost:8080/api/clients/' + id);\n  }\n  logIn(name, password, role) {\n    const url = `${this.baseUrl}/${name}/${password}/${role}`;\n    return this.http.get(url, {\n      responseType: 'text'\n    }).pipe(tap(response => {\n      this.loginService.setSignin(true);\n      this.loginService.setUserId(response);\n    }));\n  }\n  // addComplaint(complaint: Complaint): Observable<any> {\n  //   return this.http.post('http://localhost:8080/complaints/add', complaint);\n  // }\n  bookComplaint(clientId, productModelNumber, complaint) {\n    const params = new HttpParams().set('clientId', clientId).set('productModelNumber', productModelNumber);\n    return this.http.post('http://localhost:8080/complaints/book', complaint, {\n      params\n    });\n  }\n  // addData(demo: DemoModel): Observable<any> {\n  //   return this.http.post('http://localhost:8081/addData', demo);\n  // }\n  getComplaintByClient(id) {\n    return this.http.get('http://localhost:8080/complaints/all/' + id);\n  }\n  getComplaintByEngineer(id) {\n    return this.http.get('http://localhost:8080/engineer/' + id + '/open-complaints');\n  }\n  getComplaintByEngineerAndSorted(id) {\n    return this.http.get('http://localhost:8080/engineer/' + id + '/complaints/sorted-by-priority');\n  }\n  complaintResolved(complaint, id) {\n    return this.http.put('http://localhost:8080/api/clients/complaint/status/' + id, complaint);\n  }\n  getComplaintById(id) {\n    return this.http.get('http://localhost:8080/complaints/' + id);\n  }\n  getAllProducts() {\n    return this.http.get('http://localhost:8080/api/products/allProducts');\n  }\n  getComplaintsByEngineerStatusAndResolvedDate(engineerId, status, resolvedDate) {\n    return this.http.get('http://localhost:8080/complaints/engineer/status/date', {\n      params: {\n        engineerId: engineerId.toString(),\n        status: status,\n        resolvedDate: resolvedDate\n      }\n    });\n  }\n  static {\n    this.ɵfac = function ApiService_Factory(t) {\n      return new (t || ApiService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.LoginService));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: ApiService,\n      factory: ApiService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"mappings":"AACA,SAGEA,UAAU,QACL,sBAAsB;AAC7B,SAAqBC,GAAG,QAAQ,MAAM;;;;AAStC,OAAM,MAAOC,UAAU;EAGrB;EAEAC,YAAoBC,IAAgB,EAAUC,YAA0B;IAApD,SAAI,GAAJD,IAAI;IAAsB,iBAAY,GAAZC,YAAY;IAJlD,YAAO,GAAG,6BAA6B;IACvC,qBAAgB,GAAG,sCAAsC;EAGU;EAE3E;EACA;EACA;EACA;EAEAC,aAAa,CAACC,EAAU;IACtB,OAAO,IAAI,CAACH,IAAI,CAACI,GAAG,CAAS,oCAAoC,GAAGD,EAAE,CAAC;EACzE;EAEAE,KAAK,CAACC,IAAY,EAAEC,QAAgB,EAAEC,IAAY;IAChD,MAAMC,GAAG,GAAG,GAAG,IAAI,CAACC,OAAO,IAAIJ,IAAI,IAAIC,QAAQ,IAAIC,IAAI,EAAE;IACzD,OAAO,IAAI,CAACR,IAAI,CAACI,GAAG,CAACK,GAAG,EAAE;MAAEE,YAAY,EAAE;IAAM,CAAE,CAAC,CAACC,IAAI,CACtDf,GAAG,CAAEgB,QAAQ,IAAI;MACf,IAAI,CAACZ,YAAY,CAACa,SAAS,CAAC,IAAI,CAAC;MACjC,IAAI,CAACb,YAAY,CAACc,SAAS,CAACF,QAAQ,CAAC;IACvC,CAAC,CAAC,CACH;EACH;EAEA;EACA;EACA;EAEAG,aAAa,CACXC,QAAgB,EAChBC,kBAA0B,EAC1BC,SAAc;IAEd,MAAMC,MAAM,GAAG,IAAIxB,UAAU,EAAE,CAC5ByB,GAAG,CAAC,UAAU,EAAEJ,QAAQ,CAAC,CACzBI,GAAG,CAAC,oBAAoB,EAAEH,kBAAkB,CAAC;IAEhD,OAAO,IAAI,CAAClB,IAAI,CAACsB,IAAI,CAAC,uCAAuC,EAAEH,SAAS,EAAE;MACxEC;KACD,CAAC;EACJ;EAEA;EACA;EACA;EAEAG,oBAAoB,CAACpB,EAAU;IAC7B,OAAO,IAAI,CAACH,IAAI,CAACI,GAAG,CAClB,uCAAuC,GAAGD,EAAE,CAC7C;EACH;EAEAqB,sBAAsB,CAACrB,EAAU;IAC/B,OAAO,IAAI,CAACH,IAAI,CAACI,GAAG,CAClB,iCAAiC,GAAGD,EAAE,GAAG,kBAAkB,CAC5D;EACH;EAEAsB,+BAA+B,CAACtB,EAAU;IACxC,OAAO,IAAI,CAACH,IAAI,CAACI,GAAG,CAClB,iCAAiC,GAAGD,EAAE,GAAG,gCAAgC,CAC1E;EACH;EAEAuB,iBAAiB,CAACP,SAAoB,EAAEhB,EAAU;IAChD,OAAO,IAAI,CAACH,IAAI,CAAC2B,GAAG,CAClB,qDAAqD,GAAGxB,EAAE,EAC1DgB,SAAS,CACV;EACH;EAEAS,gBAAgB,CAACzB,EAAU;IACzB,OAAO,IAAI,CAACH,IAAI,CAACI,GAAG,CAAY,mCAAmC,GAAGD,EAAE,CAAC;EAC3E;EAEA0B,cAAc;IACZ,OAAO,IAAI,CAAC7B,IAAI,CAACI,GAAG,CAClB,gDAAgD,CACjD;EACH;EAEA0B,4CAA4C,CAC1CC,UAAkB,EAClBC,MAAc,EACdC,YAAoB;IAEpB,OAAO,IAAI,CAACjC,IAAI,CAACI,GAAG,CAClB,uDAAuD,EACvD;MACEgB,MAAM,EAAE;QACNW,UAAU,EAAEA,UAAU,CAACG,QAAQ,EAAE;QACjCF,MAAM,EAAEA,MAAM;QACdC,YAAY,EAAEA;;KAEjB,CACF;EACH;;;uBAlGWnC,UAAU;IAAA;EAAA;;;aAAVA,UAAU;MAAAqC,SAAVrC,UAAU;MAAAsC,YAFT;IAAM;EAAA","names":["HttpParams","tap","ApiService","constructor","http","loginService","getClientById","id","get","logIn","name","password","role","url","baseUrl","responseType","pipe","response","setSignin","setUserId","bookComplaint","clientId","productModelNumber","complaint","params","set","post","getComplaintByClient","getComplaintByEngineer","getComplaintByEngineerAndSorted","complaintResolved","put","getComplaintById","getAllProducts","getComplaintsByEngineerStatusAndResolvedDate","engineerId","status","resolvedDate","toString","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\MB20\\OneDrive - Capgemini\\Desktop\\New folder (4)\\ABC-Electronics-Customer-Service\\ABCElectronicSmartServiceFrontend\\src\\app\\service\\Api.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport {\r\n  HttpClient,\r\n  HttpErrorResponse,\r\n  HttpParams,\r\n} from '@angular/common/http';\r\nimport { Observable, tap } from 'rxjs';\r\nimport { LoginService } from './login.service';\r\nimport { Complaint } from '../model/complaint';\r\nimport { Product } from '../model/product';\r\nimport { Client } from '../model/client';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ApiService {\r\n  private baseUrl = 'http://localhost:8080/logIn';\r\n  private bookComplaintUrl = 'http://localhost:8080/api/complaints';\r\n  // loginService: any;\r\n\r\n  constructor(private http: HttpClient, private loginService: LoginService) {}\r\n\r\n  // logIn(name: string, password: string, role: string): Observable<string> {\r\n  //   const url = `${this.baseUrl}/${name}/${password}/${role}`;\r\n  //   return this.http.get<string>(url);\r\n  // }\r\n\r\n  getClientById(id: string): Observable<Client> {\r\n    return this.http.get<Client>('http://localhost:8080/api/clients/' + id);\r\n  }\r\n\r\n  logIn(name: string, password: string, role: string): Observable<string> {\r\n    const url = `${this.baseUrl}/${name}/${password}/${role}`;\r\n    return this.http.get(url, { responseType: 'text' }).pipe(\r\n      tap((response) => {\r\n        this.loginService.setSignin(true);\r\n        this.loginService.setUserId(response);\r\n      })\r\n    );\r\n  }\r\n\r\n  // addComplaint(complaint: Complaint): Observable<any> {\r\n  //   return this.http.post('http://localhost:8080/complaints/add', complaint);\r\n  // }\r\n\r\n  bookComplaint(\r\n    clientId: string,\r\n    productModelNumber: string,\r\n    complaint: any\r\n  ): Observable<any> {\r\n    const params = new HttpParams()\r\n      .set('clientId', clientId)\r\n      .set('productModelNumber', productModelNumber);\r\n\r\n    return this.http.post('http://localhost:8080/complaints/book', complaint, {\r\n      params,\r\n    });\r\n  }\r\n\r\n  // addData(demo: DemoModel): Observable<any> {\r\n  //   return this.http.post('http://localhost:8081/addData', demo);\r\n  // }\r\n\r\n  getComplaintByClient(id: String): Observable<Complaint[]> {\r\n    return this.http.get<Complaint[]>(\r\n      'http://localhost:8080/complaints/all/' + id\r\n    );\r\n  }\r\n\r\n  getComplaintByEngineer(id: number): Observable<Complaint[]> {\r\n    return this.http.get<Complaint[]>(\r\n      'http://localhost:8080/engineer/' + id + '/open-complaints'\r\n    );\r\n  }\r\n\r\n  getComplaintByEngineerAndSorted(id: number): Observable<Complaint[]> {\r\n    return this.http.get<Complaint[]>(\r\n      'http://localhost:8080/engineer/' + id + '/complaints/sorted-by-priority'\r\n    );\r\n  }\r\n\r\n  complaintResolved(complaint: Complaint, id: number): Observable<any> {\r\n    return this.http.put(\r\n      'http://localhost:8080/api/clients/complaint/status/' + id,\r\n      complaint\r\n    );\r\n  }\r\n\r\n  getComplaintById(id: number): Observable<Complaint> {\r\n    return this.http.get<Complaint>('http://localhost:8080/complaints/' + id);\r\n  }\r\n\r\n  getAllProducts(): Observable<Product[]> {\r\n    return this.http.get<Product[]>(\r\n      'http://localhost:8080/api/products/allProducts'\r\n    );\r\n  }\r\n\r\n  getComplaintsByEngineerStatusAndResolvedDate(\r\n    engineerId: number,\r\n    status: string,\r\n    resolvedDate: string\r\n  ): Observable<Complaint[]> {\r\n    return this.http.get<Complaint[]>(\r\n      'http://localhost:8080/complaints/engineer/status/date',\r\n      {\r\n        params: {\r\n          engineerId: engineerId.toString(),\r\n          status: status,\r\n          resolvedDate: resolvedDate,\r\n        },\r\n      }\r\n    );\r\n  }\r\n\r\n  // bookComplaint(\r\n  //   clientId: string,\r\n  //   productModelNumber: string,\r\n  //   complaint: { description: string }\r\n  // ): Observable<string> {\r\n  //   const url = `${this.bookComplaintUrl}/complaints/book`;\r\n  //   const params = { clientId, productModelNumber };\r\n  //   return this.http.post<string>(url, complaint, { params });\r\n  // }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}